# Feature Specification: 번개 모임 정산기

**Feature Branch**: `1-dutch-pay-calculator`
**Created**: 2025-10-30
**Status**: Draft
**Input**: User description: "다음 요구사항을 바탕으로 '번개 모임 정산기' 웹 애플리케이션의 상세 명세서(spec.md)를 생성해 줘. **목표**: 모임의 총무가 여러 차수에 걸친 술자리 비용을 쉽게 정산하고 공유할 수 있는 웹사이트 구축. **핵심 기능**: 1. **차수(Round) 관리**: 총무는 '1차: 술주유', '2차: 노래공원'과 같이 각 차수의 이름과 총 결제 금액을 입력할 수 있다. 2. **참가자 관리**: - 각 차수별로 참여한 인원을 이름으로 추가할 수 있다. - 술자리가 진행됨에 따라 중간에 합류한 인원을 다음 차수부터 포함하여 정산할 수 있다. 3. **할인(DC) 기능**: 특정 차수에서 특정 인원에게 고정 할인 금액을 적용할 수 있다. 할인된 금액은 해당 차수의 나머지 인원들이 나누어 부담한다. 4. **최종 정산 및 결과**: - '최종 정산' 버튼을 누르면, 각 인원이 내야 할 총 금액이 계산되어 명확하게 표시된다. - 정산 결과는 아래 예시와 같은 형식으로 텍스트로 출력되어야 한다. - 사용자가 결과를 쉽게 공유할 수 있도록 '텍스트 복사하기' 기능을 제공한다. **결과 예시**: ''' 1차(술주유): 50,500/3=16,833원(둥둥, 징어, 돌맹) 2차(노래공원): 114,000/8=9,120원(둥둥, 장래, 징어, 돌맹, 아리, 대팔, 낭낭, 연두) 3차(국밥집): 70,000/4=17,500원(둥둥, 징어, 대팔, 연두) 4차(편의점): 20,000/지정 분담(준혁, 현진[-5,000]) Total) 둥둥: 43,453원 ... (나머지 인원) 현진: 5,000원 '''"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 차수 관리 (Priority: P1)

총무는 각 차수의 이름과 총 결제 금액을 입력, 수정, 삭제할 수 있다.

**Why this priority**: 정산의 가장 기본이 되는 핵심 기능이다.
**Independent Test**: 차수를 추가하고, 금액을 입력한 뒤, 정보가 올바르게 표시되는지 확인한다.

**Acceptance Scenarios**:

1.  **Given** 정산 페이지에 접속했을 때, **When** '차수 추가' 버튼을 누르면, **Then** 차수 이름과 금액을 입력할 수 있는 폼이 나타난다.
2.  **Given** 차수 정보를 입력하고, **When** '저장' 버튼을 누르면, **Then** 새로운 차수 정보가 목록에 추가된다.
3.  **Given** 기존 차수 목록이 있을 때, **When** 특정 차수의 '삭제' 버튼을 누르면, **Then** 해당 차수가 목록에서 삭제된다.

---

### User Story 2 - 참가자 관리 (Priority: P1)

총무는 각 차수별로 참여한 인원을 추가하거나 제외할 수 있다.

**Why this priority**: 차수별로 실제 참여한 인원을 바탕으로 정확한 계산을 하기 위해 필수적이다.
**Independent Test**: 특정 차수에 참가자를 추가하고, 다른 차수에서는 제외한 뒤, 각 차수의 참가자 명단이 올바르게 표시되는지 확인한다.

**Acceptance Scenarios**:

1.  **Given** 차수가 생성되었을 때, **When** 참가자 추가 필드에 이름을 입력하고 '추가' 버튼을 누르면, **Then** 해당 차수의 참가자 목록에 이름이 추가된다.
2.  **Given** 참가자가 추가된 상태에서, **When** 특정 참가자 이름 옆의 'X' 버튼을 누르면, **Then** 해당 차수의 참가자 목록에서 이름이 제거된다.
3.  **Given** 1차에 A, B, C가 참여하고, **When** 2차에는 B, C, D가 참여하도록 설정하면, **Then** 각 차수의 참가자 명단이 독립적으로 유지된다.

---

### User Story 3 - 할인 적용 (Priority: P2)

총무는 특정 차수에서 특정 인원에게 고정 할인 금액을 적용할 수 있다.

**Why this priority**: 늦게 참여하거나 특별한 상황이 있는 인원을 배려하는 실용적인 기능을 제공한다.
**Independent Test**: 특정 차수의 특정 참가자에게 할인 금액을 적용하고, 최종 정산 시 해당 할인이 올바르게 반영되었는지 확인한다.

**Acceptance Scenarios**:

1.  **Given** 참가자가 있는 차수에서, **When** 특정 참가자를 선택하고 '할인 적용' 버튼을 누르면, **Then** 할인 금액을 입력하는 모달(또는 입력 필드)이 나타난다.
2.  **Given** 할인 금액을 입력하고 '확인' 버튼을 누르면, **Then** 해당 참가자에게 할인 정보가 표시되고, 해당 차수의 나머지 인원들이 할인 금액을 분담하여 계산된다.

---

### User Story 4 - 최종 정산 및 결과 공유 (Priority: P1)

총무는 '최종 정산' 버튼을 눌러 각 인원이 내야 할 총 금액을 확인하고, 결과를 텍스트로 복사할 수 있다.

**Why this priority**: 정산의 최종 목표이며, 결과를 편리하게 공유하는 핵심적인 사용자 경험을 제공한다.
**Independent Test**: 모든 정보를 입력한 후 '최종 정산' 버튼을 누르고, 표시된 결과가 예상과 일치하는지 확인한 뒤, '텍스트 복사하기' 버튼으로 클립보드에 복사되는지 확인한다.

**Acceptance Scenarios**:

1.  **Given** 모든 차수와 참가자, 할인 정보가 입력되었을 때, **When** '최종 정산' 버튼을 누르면, **Then** 각 인원별 총 정산 금액이 명확하게 표시된다.
2.  **Given** 정산 결과가 표시되었을 때, **When** '텍스트 복사하기' 버튼을 누르면, **Then** 정산 결과 전체가 클립보드에 복사되고 "복사되었습니다!"와 같은 확인 메시지가 나타난다.

### Edge Cases

-   **0원 결제**: 특정 차수의 결제 금액이 0원일 경우 어떻게 처리할 것인가? (→ 해당 차수는 계산에서 제외)
-   **참가자 0명**: 특정 차수에 참가자가 한 명도 없을 경우 어떻게 처리할 것인가? (→ 해당 차수는 계산에서 제외하고 경고 메시지 표시)
-   **할인 금액이 총액보다 큰 경우**: 특정인의 할인 금액이 해당 차수의 1인당 부담액보다 클 경우 어떻게 처리할 것인가? [NEEDS CLARIFICATION: 해당 인원의 부담액은 0원으로 처리하고, 나머지 할인액은 다른 참여자에게 전가하지 않는 것이 합리적인가?]

## Requirements *(mandatory)*

### Functional Requirements

-   **FR-001**: 시스템은 사용자가 차수(이름, 총액)를 추가, 수정, 삭제할 수 있도록 해야 한다.
-   **FR-002**: 시스템은 각 차수별로 참가자를 이름으로 추가하고 제거할 수 있도록 해야 한다.
-   **FR-003**: 시스템은 중간에 합류한 인원을 다음 차수부터 계산에 포함시킬 수 있어야 한다.
-   **FR-004**: 시스템은 특정 차수의 특정 참가자에게 고정 할인 금액을 적용할 수 있어야 한다.
-   **FR-005**: 할인 금액은 해당 차수의 나머지 참가자들이 동일하게 나누어 부담해야 한다.
-   **FR-006**: 시스템은 모든 정보를 바탕으로 각 참가자가 최종적으로 내야 할 총 금액을 계산해야 한다.
-   **FR-007**: 시스템은 최종 정산 결과를 명시된 예시와 유사한 텍스트 형식으로 표시해야 한다.
-   **FR-008**: 시스템은 사용자가 최종 정산 결과 텍스트를 클립보드로 복사할 수 있는 기능을 제공해야 한다.

### Key Entities *(include if feature involves data)*

-   **Round**: `id`, `name`, `totalAmount`, `participants` (참가자 이름 배열), `discounts` (할인 정보 배열)
-   **Participant**: `name` (고유 식별자로 사용)
-   **Discount**: `participantName`, `amount`
-   **Settlement**: `rounds` (Round 객체 배열)

## Success Criteria *(mandatory)*

### Measurable Outcomes

-   **SC-001**: 사용자는 4차, 10명의 모임 정산을 5분 이내에 완료할 수 있다.
-   **SC-002**: 최종 계산된 금액은 원화(KRW) 기준 소수점 이하를 버림하여 오차 없이 정확해야 한다.
-   **SC-003**: 95%의 사용자가 별도의 설명 없이 '텍스트 복사하기' 기능을 성공적으로 사용한다.
